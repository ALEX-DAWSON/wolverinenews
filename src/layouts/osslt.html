{% extends 'layout.html' %}
{% block main %}
{% include 'header.html' %}
<div id="osslt-wrapper" class="pure-u-1 pure-u-md-3-4 pure-u-lg-3-5">
  <h1>{{title}}</h1>
  <p>
    Read the texts in the document(s) linked below in order to answer the questions on this page. 
  </p>
  <ul>
    {% for file in files %}
      <li>
        <a href="{{file.link}}" target="_blank">
          {{file.description}}
        </a>
      </li>
    {% endfor %}
  </ul>

  <form id="questions" onsubmit="return false">
    {% for section in sections %}
      <h2>
        {{section.title}}
      </h2>
      <ol id="section{{loop.index0}}">

      {% set sectionloop = loop %}
      {% if section.type == "reading" %}

        {% for question in section.questions %}
          <li id="question-{{sectionloop.index0}}-{{loop.index0}}" class="question" data-type="{{question.type}}" data-answer="{{question.answer}}">
            <label class="question-text">
              {{question.text}}
            </label>
            {% include 'mc-answers.html' %}
          </li> 
        {% endfor %}

      {% elif section.type == "grammar" %}

        {% for question in section.questions %}
          {% if question.question_type == "normal" %}
            <li id="question-{{sectionloop.index0}}-{{loop.index0}}" class="question" data-type="{{question.type}}" data-answer="{{question.answer}}">
              <label>
                {{question.question_text}}
              </label>
              <p>
                {{question.text}}
              </p>
              {% include 'mc-answers.html' %}
            </li> 
          {% elif question.question_type == "combination" %}
            <li id="question-{{sectionloop.index0}}-{{loop.index0}}" class="question" data-type="{{question.type}}" data-answer="{{question.answer}}">
              <label>
                {{question.question_text}}
              </label>
              <div class="grammar-list">
                <ul>
                  {% for item in question.text %}
                    <li>
                      <strong>
                        {{item}}
                      </strong>
                    </li>
                  {% endfor %}
                </ul>
              </div>
              {% include 'mc-answers.html' %}
            </li> 
          {% elif question.question_type == "identification" %}
            <li id="question-{{sectionloop.index0}}-{{loop.index0}}" class="question" data-type="{{question.type}}" data-answer="{{question.answer}}">
              <label>
                {{question.question_text}}
              </label>
              <p>
                {{question.text}}
              </p>
              {% include 'mc-answers.html' %}
            </li> 
          {% endif %}
        {% endfor %}

      {% endif %}
      </ol>
      <div class="pure-g">
        <div class="pure-u-1">
          <button onclick="markSection({{loop.index0}})">
            Submit Section
          </button>
        </div>
      </div>
    {% endfor %}
    <div class="pure-g">
      <div class="pure-u-1">
        <button onclick="markTest()">
          Submit Test
        </button>
      </div>
    </div>
  </form>

</div>

{% endblock main %}

